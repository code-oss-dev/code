variables:
  VSCODE_BUILD_VERBOSE: true
  System.Debug: true

steps:

- task: NodeTool@0
  inputs:
    versionSpec: "8.9.1"

- task: geeklearningio.gl-vsts-tasks-yarn.yarn-installer-task.YarnInstaller@2
  inputs:
    versionSpec: "1.3.2"

- script: |
    yarn
    npm run gulp -- electron-x64

- script: |
    npm run gulp -- hygiene
    ./node_modules/.bin/tsc -p ./src/tsconfig.monaco.json --noEmit
    npm run gulp -- vscode-darwin-min
  name: build

- script: |
    ./scripts/test.sh --build --reporter list
    ./scripts/test-integration.sh
  name: test
